{# News index page, should be a 'single' section #}

{% extends '_layouts/layout_main' %}

{% set body_class = 'page-news' %}
{% set title = "News - ixLab" %}

{% block content %}

  <div class="uk-container">
    <div uk-filter="target: .js-filter" uk-grid>
      <div class="uk-width-1-1 uk-margin-bottom" uk-grid>
        <h1 class="uk-heading-medium">News</h1>
      </div>
      <div class="uk-width-3-4" uk-grid>
        <div>
          <div class="js-filter" uk-grid>
            {% set query = craft.entries.section('news').limit(5) %}
            {% paginate query as pageInfo, pageEntries %}
            {% for entry in pageEntries %}
            <li data-name="{{ entry.newsCategory[0] }}">
              <div class="uk-card uk-card-default uk-grid-collapse uk-child-width-1-2@s uk-margin" uk-grid>
                <div class="uk-card-media-left uk-cover-container">
                  {% set image = entry.media %}
                  {% if image is defined and image is not null %}
                    {% set image = entry.media.one() %}
                    {% if image is not null %}
                      <img data-src="{{ image.getUrl() }}" alt="Project image" width=data-width height=data-height uk-cover>
                      <canvas width="600" height="400"></canvas>
                    {% else %}
                      <img src="http://via.placeholder.com/500x400?text=&nbsp;" alt="placeholder" uk-cover>
                      <canvas width="600" height="400"></canvas>
                    {% endif %}
                  {% endif %}
                </div>
                <div class="uk-card-body">
                    <div class="uk-card-badge uk-label uk-margin-bottom">
                      {{ entry.newsCategory[0] }}
                    </div>
                    <h3 class="uk-card-title uk-margin-top">{{ entry.title }}</h3>
                    <p class="uk-text-meta">{{ entry.date | date('M, d Y') }}</p>
                    <p>{{ entry.newsContent }}</p>
                </div>
              </div><!-- card div -->
            </li>
            {% endfor %}

          </div> <!-- js filter div -->
        </div><!-- cards grid div -->

        <div class="uk-flex uk-flex-center"> <!-- pagination -->
          <ul class="uk-pagination uk-flex-center" uk-margin>
                {% if pageInfo.firstUrl %}
                  <li><a href="{{ pageInfo.firstUrl }}">First Page</a></li>
                {% endif %}

                {% if pageInfo.prevUrl %}
                  <li>
                    <a href="{{ pageInfo.prevUrl }}">
                    <span class="uk-margin-small-right" uk-pagination-previous></span>
                    </a>
                  </li>
                {% endif %}

                {% for page, url in pageInfo.getPrevUrls(2) %}
                  <li><a href="{{ url }}">{{ page }}</a></li>
                {% endfor %}

                <li class="uk-active">{{ pageInfo.currentPage }}</li>

                {% for page, url in pageInfo.getNextUrls(2) %}
                  <li><a href="{{ url }}">{{ page }}</a></li>
                {% endfor %}

                {% if pageInfo.nextUrl %}
                  <li>
                    <a href="{{ pageInfo.nextUrl }}"><span class="uk-margin-small-left" uk-pagination-next></span></a>
                  </li>
                {% endif %}

                <li><a href="{{ pageInfo.lastUrl }}">Last Page</a></li>
          </ul>
        </div> <!-- pagination -->

      </div> <!-- news feed -->

      <div class="uk-width-1-4 " uk-grid> 
        <div>
          <h2 class="uk-text-large">
            Search News
          </h2>
            <form class="uk-search uk-search-default">
            <a href="" class="uk-search-icon-flip" uk-search-icon></a>
              <input class="uk-search-input" type="search" placeholder="Search for...">
            </form>
          
          <div class="uk-margin-medium-top">
            <h3 class"uk-text-large">
              See News Category
            </h3>
            <ul class="uk-subnav uk-subnav-pill">
              <li class="active" uk-filter-control><a href="#">All</a></li>
            {% for category in craft.categories.group('newsCategory') %}
              <!-- only display cateogies that have entries -->
              {% if craft.entries.section('news').relatedTo(category)|length > 0 %}
                <li uk-filter-control="[data-name='{{ category.title }}']"><a href="#">{{ category.title }}</a></li>
              {% endif %}
            {% endfor %}
            </ul>
          </div> <!-- category list -->

          <h3 class"uk-text-large">
            Archive
          </h3>
          <div>
            <button class="uk-button uk-button-default" type="button">2020 
              <span uk-icon="icon: triangle-down"></span>
            </button>
              <div uk-dropdown="mode: click">
                  <ul class="uk-nav uk-dropdown-nav">
                      <li class="uk-active"><a href="#">2020</a></li>
                      <li><a href="#">2019</a></li>
                      <li class="uk-nav-header">2018</li>
                      <li><a href="#">Item</a></li>
                      <li><a href="#">Item</a></li>
                      <li class="uk-nav-divider"></li>
                      <li><a href="#">Item</a></li>
                  </ul>
              </div>
          </div>
          </div>
      </div> 

    </div><!-- end of grid -->
  </div> <!-- end container -->

{% endblock %}