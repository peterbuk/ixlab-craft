{% extends '_layouts/layout_main' %}

{% block content %}
<div class="uk-container">
  <div class="uk-width-1-1 uk-align-center uk-background-muted">
    <h2 class="uk-align-center uk-margin-remove-bottom uk-padding uk-text-center"> {{ entry.title }}</h2>

    {% set featureImage = entry.courseFeatureImage.one() %}
    {% if featureImage %}
      <img class="uk-align-center uk-padding-large uk-padding-remove-top uk-margin-remove-top" data-src="../{{ featureImage.getUrl() }}" alt="Project image" width=data-width height=data-height uk-img>
    {% else %}
      <img class="uk-align-center uk-padding-large uk-padding-remove-top uk-margin-remove-top" src="http://via.placeholder.com/500x400?text=&nbsp;" alt="placeholder" uk-img>
    {% endif %}
  </div>
  <div class="uk-margin-medium-left uk-padding-small course-entry">
    <h2>Course Code</h2>
    <p> {{ entry.courseCode }} </p>

    <h2>Description</h2>
    <p>{{ entry.description }}</p>

    {% for block in entry.courseDetails.all() %}
      {% if block.type == "text" %}
        {% if block.sectionHeading is defined and block.sectionHeading is not null %}
          <h2 class="uk-margin-medium-top">{{ block.sectionHeading }}</h2>
        {% endif %}
        {% if block.textblock is defined and block.textblock is not null %}
          {{ block.textblock|markdown }}
        {% endif %}

      {% elseif block.type == "imageGallery" %}
        <div class="uk-grid-medium uk-width-1-1 uk-child-width-1-3@m" uk-lightbox uk-grid>
          {% set images = block.image.all() %}
          {% for image in images %}
            <div>
              <a class="uk-inline" href="../{{image.getUrl()}}">
                <img src="../{{image.getUrl('thumbLSquare')}}">
              </a>
            </div>
          {% endfor %}
          <p class="uk-width-1-1 uk-text-center uk-text-meta uk-margin-small-top">[ Click images to enlarge ]</p>
        </div>

      {% elseif block.type == "video" %}
        {% set videos = block.video.all() %}
        {% for video in videos %}
          <video data-src="{{ video.getUrl() }}" width="100%" src=".././{{ video.getUrl() }}" controls playsinline uk-video="autoplay:false"></video>
        {% endfor %}
      {% endif %}

    {% endfor %}
  </div>
</div>
{% endblock %}