{% extends '_layouts/layout_main' %}

{% block content %}


<div class="uk-container">
  <div class="uk-width-1-1 uk-align-center uk-background-muted" uk-grid>
    {% set featureImage = entry.researchFeatureImage.one() %}
    {% if featureImage %}
      <img class="uk-align-center" data-src="{{ featureImage.getUrl() }}" alt="Project image" width=data-width height=data-height uk-img>
    {% else %}
      <img src="http://via.placeholder.com/500x400?text=&nbsp;" alt="placeholder" uk-img>
    {% endif %}

    <div class="" uk-grid>
      <h1 class="uk-heading-medium uk-margin-medium-top uk-margin-medium-bottom"> {{ entry.title }}</h1>
    </div> <!-- page heading -->
  </div>

  <div class="uk-margin-medium-left content">
    <h3 class=" heading">Authors</h3>
    <p>{{ entry.authors }}</p>
    
    <h3 class="heading">Abstract</h3>
    <p>{{ entry.shortAbstract }}</p>
    
    <div uk-grid>
      {% for block in entry.moreDetails.all() %}
        {% if block.type == "heading" %}

            <h1 class="uk-heading-medium">{{ block.sectionHeading }}</h1>

        {% elseif block.type == "text" %}

            {{ block.textblock|markdown }}

        {% elseif block.type == "imageGallery" %}
          {% set images = block.image.all() %}

          <div class="uk-width-1-1 uk-child-width-1-4" uk-lightbox uk-grid>
            {% for image in images %}
              <div>
                <a class="uk-inline" href="../{{image.getUrl()}}">
                  <img src="../{{image.getUrl('thumbSquare')}}">
                </a>
              </div>
            {% endfor %}
          </div>

            {# {% if images|length is same as(1) %}
              {% set galleryImage = images[0] %}        
              <div class="uk-width-1-1" uk-grid>
                <img class="uk-align-center" data-src="{{ galleryImage.getUrl() }}" alt="Project image" width=data-width height=data-height uk-img>
              </div>
            {% elseif images|length is same as(2) %}
              {% for galleryImage in images %}
                <div class="uk-width-1-2" uk-grid>
                  <img class="uk-align-center" data-src="{{ galleryImage.getUrl() }}" alt="Project image" width=data-width height=data-height uk-img>
                </div>
              {% endfor %}
            {% elseif images|length is same as(3) %}
              {% for galleryImage in images %}
                <div class="uk-width-1-3" uk-grid>
                  <img class="uk-align-center" data-src="{{ galleryImage.getUrl() }}" alt="Project image" width=data-width height=data-height uk-img>
                </div>
              {% endfor %}
            {% endif %} #}
        {% endif %}
      
      {% endfor %}
    </div>

  </div>
</div>

{% endblock %}